<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Puzzle ğŸ’–</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
body{
margin:0;
background:#fff6ea;
font-family:'Poppins',sans-serif;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
overflow:hidden;
}

.container{text-align:center;}

h1{
font-family:'Playfair Display',serif;
color:#c9183a;
margin-bottom:15px;
}

#puzzle{
display:grid;
grid-template-columns:repeat(3,110px);
gap:6px;
justify-content:center;
}

.tile{
width:110px;
height:110px;
background-size:330px 330px;
border-radius:14px;
cursor:pointer;
box-shadow:0 4px 10px rgba(0,0,0,.2);
}

.selected{
outline:4px solid #c9183a;
}

#continue{
margin-top:20px;
padding:12px 30px;
border:none;
border-radius:30px;
background:#c9183a;
color:white;
font-size:18px;
display:none;
cursor:pointer;
}

#final{
display:none;
margin-top:20px;
}

.petal{
position:fixed;
top:-20px;
font-size:20px;
animation:fall linear infinite;
opacity:.8;
}

@keyframes fall{
to{transform:translateY(110vh)}
}
</style>
</head>

<body>

<div class="container">

<h1>Solve the puzzle ğŸ’•</h1>

<div id="puzzle"></div>

<button id="continue">Continue â¤ï¸</button>

<div id="final">
<h1>Congratulations ğŸ’–</h1>
<p>You unlocked a date with me ğŸ’•<br>Happy Valentineâ€™s Day â¤ï¸</p>
<img src="https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif" width="220">
</div>

</div>

<script>
const imageURL="ghibli.jpg.PNG"; // EXACT file name

const puzzle=document.getElementById("puzzle");
const btn=document.getElementById("continue");
const final=document.getElementById("final");

let order=[0,1,2,3,4,5,6,7,8];
let selected=null;

order.sort(()=>Math.random()-0.5);

function draw(){
puzzle.innerHTML="";
order.forEach((pos,i)=>{
let t=document.createElement("div");
t.className="tile";
t.style.backgroundImage=`url(${imageURL})`;
t.style.backgroundPosition=
`-${(pos%3)*110}px -${Math.floor(pos/3)*110}px`;
t.onclick=()=>select(i,t);
puzzle.appendChild(t);
});
}

function select(i,el){
if(selected===null){
selected={i,el};
el.classList.add("selected");
}else{
[order[selected.i], order[i]]=[order[i], order[selected.i]];
selected=null;
draw();
checkWin();
}
}

function checkWin(){
if(order.every((v,i)=>v===i)){
btn.style.display="block";
}
}

draw();

btn.onclick=()=>{
puzzle.style.display="none";
btn.style.display="none";
final.style.display="block";
};

function petals(){
let p=document.createElement("div");
p.className="petal";
p.innerHTML="ğŸŒ¸";
p.style.left=Math.random()*100+"vw";
p.style.animationDuration=3+Math.random()*3+"s";
document.body.appendChild(p);
setTimeout(()=>p.remove(),6000);
}
setInterval(petals,300);
</script>

</body>
</html>
