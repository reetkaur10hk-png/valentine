<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine Surprise ðŸ’–</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap');

body{
margin:0;
background:#fff6e9;
font-family:'Playfair Display', serif;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
flex-direction:column;
text-align:center;
overflow:hidden;
}

h2{color:#c9183a;}

#game{
display:grid;
grid-template-columns:repeat(3,110px);
gap:5px;
margin-top:20px;
}

.tile{
width:110px;
height:110px;
background-size:330px 330px;
border-radius:12px;
cursor:pointer;
}

#message{
display:none;
font-size:28px;
color:#c9183a;
margin-top:30px;
min-height:90px;
}

.petal{
position:fixed;
top:-10px;
font-size:22px;
animation:fall 7s linear forwards;
opacity:.85;
}

@keyframes fall{
to{
transform:translateY(120vh) rotate(360deg);
opacity:0;
}
}
</style>
</head>

<body>

<h2>Solve the puzzle to unlock your surprise ðŸ§©ðŸ’–</h2>

<div id="game"></div>

<div id="message"></div>

<script>
const image = "ghibli.jpg.PNG";
const game=document.getElementById("game");
const message=document.getElementById("message");
let tiles=[];

for(let i=0;i<9;i++){
const t=document.createElement("div");
t.className="tile";
t.style.backgroundImage=`url(${image})`;
t.style.backgroundPosition=
`${-(i%3)*110}px ${-Math.floor(i/3)*110}px`;
t.dataset.correct=i;
tiles.push(t);
}

shuffle();
render();

function shuffle(){
tiles.sort(()=>Math.random()-0.5);
}

function render(){
game.innerHTML="";
tiles.forEach(t=>{
t.onclick=()=>{shuffle();render();checkWin();}
game.appendChild(t);
});
}

function checkWin(){
let win=true;
tiles.forEach((t,i)=>{
if(t.dataset.correct!=i) win=false;
});
if(win) unlock();
}

function unlock(){
game.style.display="none";
message.style.display="block";
typeText("Congratulations! You unlocked a date with me ðŸ’•\nHappy Valentineâ€™s Day â¤ï¸");
startPetals();
}

function typeText(text){
let i=0;
message.innerHTML="";
const timer=setInterval(()=>{
message.innerHTML+=text[i]==="\n"?"<br>":text[i];
i++;
if(i>=text.length) clearInterval(timer);
},60);
}

function startPetals(){
setInterval(()=>{
const p=document.createElement("div");
p.className="petal";
p.innerHTML="ðŸŒ¸";
p.style.left=Math.random()*100+"vw";
document.body.appendChild(p);
setTimeout(()=>p.remove(),7000);
},700);
}
</script>

</body>
</html>
